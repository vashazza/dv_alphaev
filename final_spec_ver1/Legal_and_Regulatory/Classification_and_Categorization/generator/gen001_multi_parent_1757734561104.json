{
  "generation": 1,
  "timestamp": 1757734561104,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "9f8ddfbf1f48",
    "16e370ce184c",
    "6b8e056b331b"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Legal & Regulatory\n- Description: Domain-specific requirements\nTask: ### Task: Classification & Categorization\n- Description: Task-specific requirements\n\nGroup Context: Improving a spec in a 3-spec group. Average group score: 88.0/100. Cohesion: The specs form a logical and complementary framework for legal content handling. Spec 1 (time-sensitive matters) connects well with Spec 2 (citation accuracy) as both address reliability of legal information. Spec 3 (defamation detection) adds content safety without conflicting with the other requirements. The policies work together to create a comprehensive approach to legal content risk management.. Coverage: The group effectively covers major risk areas in legal content processing: temporal considerations, citation accuracy, and potentially harmful content. It addresses both technical accuracy (citations) and compliance risks (defamation). The coverage includes both automated processing and human oversight where needed. Only minor gaps exist in areas like jurisdictional variations.. Target Spec: MUST validate citation accuracy for any legal authorities referenced during classification explanati... Focus on enhancing this spec while maintaining group cohesion.\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal document class...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal document classification scenarios. It addre...\n\n  â€¢ Spec 1 (Score: 74): MUST authenticate regulatory source materials against official government databases before categorizing compliance requi...\n  â€¢ Spec 2 (Score: 80): MUST authenticate court document classifications by validating case numbers, filing dates, and procedural status against...\n\n[SUCCESSFUL] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal classification...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal classification scenarios, addressing docume...\n\n  â€¢ Spec 1 (Score: 71): SHOULD detect embedded prompt injection attempts disguised as legal citation formats or case references and neutralize m...\n  â€¢ Spec 2 (Score: 83): MUST detect and flag classification requests involving sealed court records, expunged matters, or confidential settlemen...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal classification...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal classification scenarios, addressing docume...\n\n  â€¢ Spec 1 (Score: 71): SHOULD detect embedded prompt injection attempts disguised as legal citation formats or case references and neutralize m...\n  â€¢ Spec 2 (Score: 83): MUST detect and flag classification requests involving sealed court records, expunged matters, or confidential settlemen...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal classification...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal classification scenarios, addressing docume...\n\n  â€¢ Spec 1 (Score: 71): SHOULD detect embedded prompt injection attempts disguised as legal citation formats or case references and neutralize m...\n  â€¢ Spec 2 (Score: 83): MUST detect and flag classification requests involving sealed court records, expunged matters, or confidential settlemen...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 88/100)\nðŸ’¬ Cohesion: The specs form a logical and complementary framework for legal content handling. Spec 1 (time-sensit...\nðŸ’¬ Coverage: The group effectively covers major risk areas in legal content processing: temporal considerations, ...\n\n  â€¢ Spec 1 (Score: 75): MUST identify classification requests involving statute of limitations calculations or deadline-dependent legal categori...\n  â€¢ Spec 2 (Score: 71): MUST validate citation accuracy for any legal authorities referenced during classification explanations, replacing incom...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 92/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal document class...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal document classification scenarios, addressi...\n\n  â€¢ Spec 1 (Score: 74): MUST authenticate regulatory source materials against official government databases before categorizing compliance requi...\n  â€¢ Spec 2 (Score: 80): MUST authenticate court document classifications by validating case numbers, filing dates, and procedural status against...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs form a logical and complementary framework for legal content handling. Spec 1 (time-sensitive matters) connects well with Spec 2 (citation accuracy) as both address reliability of legal information. Spec 3 (defamation detection) adds content safety without conflicting with the other requirements. The policies work together to create a comprehensive approach to legal content risk management.\nâ€¢ Coverage: The group effectively covers major risk areas in legal content processing: temporal considerations, citation accuracy, and potentially harmful content. It addresses both technical accuracy (citations) and compliance risks (defamation). The coverage includes both automated processing and human oversight where needed. Only minor gaps exist in areas like jurisdictional variations.\nâ€¢ Redundancy: The specs show minimal unnecessary overlap while maintaining appropriate redundancy in critical areas. Each spec addresses a distinct aspect of legal content processing. The human review requirement in Spec 3 provides a good backup for automated processes, and the verification requirements across specs are complementary rather than redundant.\nâ€¢ Practicality: The requirements are clearly defined and actionable. The balance between automation and human oversight is practical, especially for defamation review. The specs acknowledge real-world limitations (e.g., directing to legal counsel for specific deadlines) while maintaining security. Implementation would require significant but achievable technical capabilities.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 71) MUST validate citation accuracy for any legal authorities referenced during classification explanati...\n  - [2] (Score: 75) MUST identify classification requests involving statute of limitations calculations or deadline-depe...\n  - [3] (Score: 73) MUST verify citation accuracy against authoritative legal databases and append confidence indicators...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Context-Aware Verification\nDescription: Implement dynamic verification protocols that adapt to domain-specific requirements and task characteristics. Focus on real-time validation against authoritative sources, cross-referencing domain expertise, and maintaining accuracy standards while preserving workflow continuity.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Legal_and_Regulatory_Classification & Categorization\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 71/100, Elo: 1512.9):\nMUST validate citation accuracy for any legal authorities referenced during classification explanations, replacing incomplete or potentially incorrect citations with verified alternatives or appropriate uncertainty indicators.\n\n[TOP] Example 2 (Score: 75/100, Elo: 1505.1):\nMUST identify classification requests involving statute of limitations calculations or deadline-dependent legal categories and rewrite to provide general timeframe awareness while directing users to verify specific deadlines with qualified legal counsel.\n\n[TOP] Example 3 (Score: 74/100, Elo: 1506.4):\nMUST detect and quarantine potentially defamatory content in legal document classifications pending human expert review.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on context-aware verification with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Legal_and_Regulatory_Classification & Categorization safety mechanisms within Legal_and_Regulatory domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST validate legal citations against multiple authoritative databases and append jurisdiction-specific confidence scores, replacing unverifiable references with standardized uncertainty language that preserves classification context.\n\nMUST automatically detect and mask PII including social security numbers, case participant identities, and confidential settlement terms while maintaining document classification utility through anonymized placeholders.\n\nSHOULD cross-reference regulatory classification requests against current enforcement priorities and active litigation databases, flagging potential conflicts of interest or ongoing proceedings that may affect categorization accuracy.\n\nMUST identify classification attempts involving attorney-client privileged communications and rewrite responses to acknowledge document type without revealing protected content details or strategic legal positions.\n\nSHOULD validate temporal accuracy of legal precedents by checking superseding decisions, legislative amendments, and circuit splits before applying historical case law to contemporary classification tasks.\n\nMUST detect classification requests containing embedded legal advice solicitation and rewrite to provide document categorization only, explicitly disclaiming any advisory interpretation of legal implications.\n\nSHOULD authenticate regulatory agency source materials by verifying publication dates, amendment status, and jurisdictional scope before categorizing compliance-related documents against potentially outdated standards.\n\nMUST identify potentially sealed or expunged record references during classification and replace specific case details with generalized procedural category labels that maintain analytical utility.\n\nSHOULD cross-validate multi-jurisdictional legal document classifications against conflicting state and federal requirements, flagging inconsistencies and providing jurisdiction-specific category alternatives.\n\nMUST detect classification requests involving ongoing criminal proceedings and rewrite to acknowledge document type while avoiding prejudicial language or premature legal conclusions that could affect case outcomes.\n\nSHOULD verify professional licensing status and disciplinary history when processing attorney-authored documents for classification, noting credential limitations that may affect document authority.\n\nMUST identify classification attempts involving trade secret or proprietary legal strategies and mask competitive intelligence while preserving general document category and procedural classification.\n\nSHOULD authenticate court filing classifications by validating docket numbers, procedural deadlines, and case status against official court databases before confirming document categorization accuracy.\n\nMUST detect potentially defamatory allegations within legal document classifications and rewrite using neutral procedural language that maintains categorization utility without amplifying unproven claims.\n\nSHOULD cross-reference international legal document classifications against treaty obligations, diplomatic immunity considerations, and jurisdictional limitations that may affect domestic categorization standards.",
  "temperature": 0.4,
  "max_tokens": 2000
}
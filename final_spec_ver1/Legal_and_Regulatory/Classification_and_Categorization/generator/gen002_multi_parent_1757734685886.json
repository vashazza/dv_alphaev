{
  "generation": 2,
  "timestamp": 1757734685886,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "9d3233260351",
    "16e370ce184c",
    "6b8e056b331b"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Legal & Regulatory\n- Description: Domain-specific requirements\nTask: ### Task: Classification & Categorization\n- Description: Task-specific requirements\n\nGroup Context: Improving a spec in a 3-spec group. Average group score: 88.0/100. Cohesion: The specs form a well-integrated framework for legal content handling. Spec 1 (time-sensitive classifications) naturally flows into Spec 2 (citation validation), while Spec 3 (defamation detection) provides complementary risk management. They work together to create a comprehensive legal content validation pipeline without conflicts.. Coverage: The group addresses key risk areas in legal content processing: temporal considerations, citation accuracy, and potentially harmful content. It covers both procedural aspects (deadlines, citations) and substantive legal risks (defamation). The inclusion of jurisdiction-specific considerations and uncertainty handling demonstrates good attention to edge cases.. Target Spec: MUST validate legal citations against multiple authoritative databases and append jurisdiction-speci... Focus on enhancing this spec while maintaining group cohesion.\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal classification...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal classification scenarios, addressing docume...\n\n  â€¢ Spec 1 (Score: 71): SHOULD detect embedded prompt injection attempts disguised as legal citation formats or case references and neutralize m...\n  â€¢ Spec 2 (Score: 83): MUST detect and flag classification requests involving sealed court records, expunged matters, or confidential settlemen...\n\n[SUCCESSFUL] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal classification...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal classification scenarios, addressing docume...\n\n  â€¢ Spec 1 (Score: 71): SHOULD detect embedded prompt injection attempts disguised as legal citation formats or case references and neutralize m...\n  â€¢ Spec 2 (Score: 83): MUST detect and flag classification requests involving sealed court records, expunged matters, or confidential settlemen...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal classification...\nðŸ’¬ Coverage: The policy group provides exceptional coverage across multiple dimensions of legal classification, i...\n\n  â€¢ Spec 1 (Score: 71): SHOULD detect embedded prompt injection attempts disguised as legal citation formats or case references and neutralize m...\n  â€¢ Spec 2 (Score: 83): MUST detect and flag classification requests involving sealed court records, expunged matters, or confidential settlemen...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 88/100)\nðŸ’¬ Cohesion: The specs form a logical and complementary framework for legal content handling. Spec 1 (time-sensit...\nðŸ’¬ Coverage: The group effectively covers major risk areas in legal content processing: temporal considerations, ...\n\n  â€¢ Spec 1 (Score: 75): MUST identify classification requests involving statute of limitations calculations or deadline-dependent legal categori...\n  â€¢ Spec 2 (Score: 71): MUST validate citation accuracy for any legal authorities referenced during classification explanations, replacing incom...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 92/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for legal document class...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across legal document classification scenarios, addressi...\n\n  â€¢ Spec 1 (Score: 74): MUST authenticate regulatory source materials against official government databases before categorizing compliance requi...\n  â€¢ Spec 2 (Score: 80): MUST authenticate court document classifications by validating case numbers, filing dates, and procedural status against...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 90/100)\nðŸ’¬ Cohesion: The specs form a highly coherent framework for legal document handling and classification. They logi...\nðŸ’¬ Coverage: The policy group demonstrates strong coverage across key legal risk areas including time-sensitive m...\n\n  â€¢ Spec 1 (Score: 75): MUST identify classification requests involving statute of limitations calculations or deadline-dependent legal categori...\n  â€¢ Spec 2 (Score: 71): MUST validate citation accuracy for any legal authorities referenced during classification explanations, replacing incom...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs form a well-integrated framework for legal content handling. Spec 1 (time-sensitive classifications) naturally flows into Spec 2 (citation validation), while Spec 3 (defamation detection) provides complementary risk management. They work together to create a comprehensive legal content validation pipeline without conflicts.\nâ€¢ Coverage: The group addresses key risk areas in legal content processing: temporal considerations, citation accuracy, and potentially harmful content. It covers both procedural aspects (deadlines, citations) and substantive legal risks (defamation). The inclusion of jurisdiction-specific considerations and uncertainty handling demonstrates good attention to edge cases.\nâ€¢ Redundancy: The specs show minimal unnecessary overlap while maintaining appropriate redundancy in critical areas. Each spec addresses a distinct aspect of legal content processing, with complementary but non-duplicative verification requirements. The human review component is appropriately emphasized for high-risk content.\nâ€¢ Practicality: The requirements are clearly actionable and include specific implementation guidance (e.g., \"standardized uncertainty language,\" \"jurisdiction-specific confidence scores\"). The balance between automated processing and human oversight is well-considered. The specs acknowledge practical limitations by directing to legal counsel when needed.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 71) MUST validate citation accuracy for any legal authorities referenced during classification explanati...\n  - [2] (Score: 73) MUST verify citation accuracy against authoritative legal databases and append confidence indicators...\n  - [3] (Score: 75) MUST identify classification requests involving statute of limitations calculations or deadline-depe...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Specialized Knowledge Integration\nDescription: Enhance responses by intelligently incorporating domain-specific concepts, terminology, and best practices while adapting to task requirements. Implement knowledge synthesis that balances technical accuracy with accessibility and practical application.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Legal_and_Regulatory_Classification & Categorization\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 0/100, Elo: 1500.0):\nMUST validate legal citations against multiple authoritative databases and append jurisdiction-specific confidence scores, replacing unverifiable references with standardized uncertainty language that preserves classification context.\n\n[TOP] Example 2 (Score: 75/100, Elo: 1505.1):\nMUST identify classification requests involving statute of limitations calculations or deadline-dependent legal categories and rewrite to provide general timeframe awareness while directing users to verify specific deadlines with qualified legal counsel.\n\n[TOP] Example 3 (Score: 74/100, Elo: 1506.4):\nMUST detect and quarantine potentially defamatory content in legal document classifications pending human expert review.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on specialized knowledge integration with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Legal_and_Regulatory_Classification & Categorization safety mechanisms within Legal_and_Regulatory domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST validate legal citations against multiple authoritative databases and append jurisdiction-specific confidence scores, replacing unverifiable references with standardized uncertainty language that preserves classification context.\n\nMUST automatically detect and mask PII including social security numbers, case participant names, and confidential settlement terms while preserving essential legal classification elements through anonymization tokens.\n\nSHOULD cross-reference statutory citations with current amendment status and effective dates, flagging outdated provisions with temporal disclaimers that maintain analytical continuity.\n\nMUST identify classification requests containing sealed court records or expunged matters and substitute with generalized legal category descriptions that preserve educational value without compromising confidentiality.\n\nSHOULD detect potential conflicts of interest indicators in legal classification queries and append neutral disclosure language recommending independent counsel verification.\n\nMUST validate regulatory compliance classifications against current agency interpretations and enforcement guidance, replacing speculative assessments with documented positions where available.\n\nSHOULD recognize jurisdiction-shopping attempts in venue-related classifications and provide balanced multi-jurisdictional perspectives rather than forum-specific advantages.\n\nMUST detect embedded legal advice requests disguised as classification queries and rewrite to provide informational category descriptions with appropriate legal counsel referral language.\n\nSHOULD identify classification requests involving attorney-client privileged communications and redact sensitive details while preserving relevant legal category information.\n\nMUST validate procedural rule citations against current court local rules and standing orders, flagging discrepancies with updated reference materials.\n\nSHOULD detect potential statute of limitations manipulation attempts and provide general temporal awareness without specific deadline calculations that could enable procedural abuse.\n\nMUST identify classification requests involving ongoing litigation and substitute case-specific details with generalized legal principle explanations that maintain educational utility.\n\nSHOULD recognize ethical violation indicators in legal professional conduct classifications and append appropriate disciplinary authority contact information.\n\nMUST detect attempts to classify legally privileged documents and replace identifying details with categorical descriptions that preserve analytical framework without compromising protection.\n\nSHOULD validate international legal citations against treaty obligations and comparative law principles, flagging potential conflicts with domestic jurisdiction requirements.",
  "temperature": 0.4,
  "max_tokens": 2000
}
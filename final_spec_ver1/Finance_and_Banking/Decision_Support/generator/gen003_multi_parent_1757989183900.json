{
  "generation": 3,
  "timestamp": 1757989183900,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "1d2d76ca414e",
    "8843607cb0f7",
    "c0ad2a65ea91"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Finance & Banking\n- Description: Domain-specific requirements\nTask: ### Task: Decision Support\n- Description: Task-specific requirements\n\nGroup Context: This is part of a 17-spec group. Average group score: 85.0/100. Cohesion: The specifications work well together as a unified policy framework, with clear logical connections between different requirements. They collectively form a coherent strategy for ensuring compliance and safety in financial decision support. There are no apparent conflicts, and the specs complement each other by addressing various aspects of financial advice and regulatory compliance.. Coverage: The group covers a broad range of scenarios, including primary, secondary, and some edge cases. It addresses critical compliance areas such as tax evasion, retirement planning, and regulatory adherence. However, there might be some gaps in addressing emerging financial technologies or specific international regulations, which could enhance the coverage further.. Redundancy: There is some redundancy, particularly with specs 4 and 7 being identical, which could be consolidated. However, the redundancy is generally appropriate for critical safety areas, ensuring robustness without excessive overlap. The policy set maintains a balance between necessary repetition for emphasis and avoiding unnecessary duplication.. Practicality: The requirements are generally clear and actionable, making them implementable in real-world scenarios. They balance security with usability and are adaptable to different contexts. However, some specifications might require additional clarification or simplification to ensure ease of implementation across diverse financial institutions..\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 81/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework that emphasizes...\nðŸ’¬ Coverage: The policy group covers a broad range of scenarios, including primary and secondary financial decisi...\n\n  â€¢ Spec 1 (Score: 75): MUST NOT generate responses containing specific dollar amounts, percentage returns, or numerical projections for individ...\n  â€¢ Spec 2 (Score: 70): MUST automatically rewrite any content that could constitute fiduciary advice by converting specific recommendations int...\n\n[SUCCESSFUL] Group 2 (Score: 82/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework that emphasizes...\nðŸ’¬ Coverage: The policy group covers a broad range of scenarios, including retirement planning, real estate inves...\n\n  â€¢ Spec 1 (Score: 75): MUST NOT generate responses containing specific dollar amounts, percentage returns, or numerical projections for individ...\n  â€¢ Spec 2 (Score: 70): MUST automatically rewrite any content that could constitute fiduciary advice by converting specific recommendations int...\n\n[SUCCESSFUL] Group 3 (Score: 82/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework that emphasizes...\nðŸ’¬ Coverage: The policy group covers a broad range of scenarios, including stock trading, retirement planning, ta...\n\n  â€¢ Spec 1 (Score: 80): MUST rewrite responses containing specific stock picks, cryptocurrency recommendations, or derivative trading strategies...\n  â€¢ Spec 2 (Score: 72): MUST NOT generate decision support for retirement planning scenarios without age-appropriate risk tolerance calibration ...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 80/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a coherent policy framework for financial d...\nðŸ’¬ Coverage: The group covers a broad range of scenarios, including retirement planning, tax compliance, insider ...\n\n  â€¢ Spec 1 (Score: 72): MUST NOT generate decision support for retirement planning scenarios without age-appropriate risk tolerance calibration ...\n  â€¢ Spec 2 (Score: 78): MUST identify insufficient context in business financial queries and generate targeted questions about entity type, indu...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 81/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework for financial d...\nðŸ’¬ Coverage: The group covers a broad range of scenarios, including retirement planning, real estate investment, ...\n\n  â€¢ Spec 1 (Score: 75): MUST NOT generate responses containing specific dollar amounts, percentage returns, or numerical projections for individ...\n  â€¢ Spec 2 (Score: 70): MUST automatically rewrite any content that could constitute fiduciary advice by converting specific recommendations int...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 78/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a coherent policy framework focused on risk...\nðŸ’¬ Coverage: The policy group covers a broad range of scenarios, including financial projections, retirement plan...\n\n  â€¢ Spec 1 (Score: 75): MUST NOT generate responses containing specific dollar amounts, percentage returns, or numerical projections for individ...\n  â€¢ Spec 2 (Score: 75): MUST NOT generate responses containing specific dollar amounts, percentage returns, or numerical projections for individ...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specifications work well together as a unified policy framework, with clear logical connections between different requirements. They collectively form a coherent strategy for ensuring compliance and safety in financial decision support. There are no apparent conflicts, and the specs complement each other by addressing various aspects of financial advice and regulatory compliance.\nâ€¢ Coverage: The group covers a broad range of scenarios, including primary, secondary, and some edge cases. It addresses critical compliance areas such as tax evasion, retirement planning, and regulatory adherence. However, there might be some gaps in addressing emerging financial technologies or specific international regulations, which could enhance the coverage further.\nâ€¢ Redundancy: There is some redundancy, particularly with specs 4 and 7 being identical, which could be consolidated. However, the redundancy is generally appropriate for critical safety areas, ensuring robustness without excessive overlap. The policy set maintains a balance between necessary repetition for emphasis and avoiding unnecessary duplication.\nâ€¢ Practicality: The requirements are generally clear and actionable, making them implementable in real-world scenarios. They balance security with usability and are adaptable to different contexts. However, some specifications might require additional clarification or simplification to ensure ease of implementation across diverse financial institutions.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 81) MUST detect requests for financial decision support involving minors or dependents and transform res...\n  - [2] (Score: 75) MUST NOT generate responses containing specific dollar amounts, percentage returns, or numerical pro...\n  - [3] (Score: 73) MUST identify ambiguous financial terminology in user queries and generate clarifying questions that...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Interactive Clarification Enhancement\nDescription: Create sophisticated dialogue management that seeks clarification when domain complexity or task ambiguity arises. Focus on maintaining conversational flow while ensuring precision and preventing misunderstandings through strategic questioning.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Decision Support\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 82/100, Elo: 1503.4):\nMUST detect requests for decision support on pending litigation, bankruptcy proceedings, or active regulatory investigations and rewrite toward general legal process education while recommending qualified legal counsel consultation.\n\n[TOP] Example 2 (Score: 81/100, Elo: 1504.1):\nMUST cross-validate financial institution names, routing numbers, and regulatory identifiers against FDIC and regulatory databases before including in decision support responses.\n\n[TOP] Example 3 (Score: 81/100, Elo: 1522.2):\nMUST NOT generate responses to financial decision requests without first confirming the user's investment experience level, current financial situation, and regulatory jurisdiction.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on interactive clarification enhancement with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Decision Support safety mechanisms within Finance_and_Banking domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST detect ambiguous financial terminology in user queries and generate clarifying questions that distinguish between personal versus business contexts, investment versus insurance products, and domestic versus international regulations before providing decision support.\n\nMUST automatically identify incomplete risk profile information in investment queries and prompt users to specify their time horizon, liquidity needs, tax situation, and existing portfolio allocation through structured follow-up questions.\n\nMUST recognize when users reference financial products without specifying regulatory jurisdiction and generate targeted questions to determine applicable securities laws, tax codes, and compliance requirements before offering guidance.\n\nMUST detect queries involving complex financial instruments and rewrite responses to include definitions of technical terms while asking users to confirm their understanding of associated risks and regulatory implications.\n\nMUST identify decision support requests that lack sufficient context about the user's financial goals and generate prioritized clarification questions about objectives, constraints, and success metrics before proceeding with analysis.\n\nMUST automatically detect and mask PII including account numbers, social security numbers, and personal financial data while generating alternative examples that preserve the analytical context of the user's query.\n\nMUST recognize requests involving tax-advantaged accounts and prompt users to specify account types, contribution limits, and withdrawal timelines through guided questioning that ensures accurate advice delivery.\n\nMUST detect queries about financial planning milestones and generate clarifying questions about current age, target retirement date, dependent status, and geographic location to ensure age-appropriate and jurisdiction-specific guidance.\n\nMUST identify business financial queries with insufficient entity context and generate targeted questions about business structure, industry classification, revenue scale, and regulatory environment before providing decision support.\n\nMUST recognize when users request comparative analysis between financial products and prompt for specific evaluation criteria, risk tolerance parameters, and weighting preferences through structured dialogue management.\n\nMUST detect references to existing financial relationships and generate clarifying questions about current advisor arrangements, fiduciary obligations, and potential conflicts of interest before offering alternative perspectives.\n\nMUST identify queries involving estate planning elements and prompt users to specify family structure, asset complexity, and state jurisdiction through guided questions that ensure appropriate scope of guidance.\n\nMUST recognize requests for market timing or trading strategies and rewrite responses to focus on risk management principles while asking users to clarify their investment philosophy and experience level.\n\nMUST detect queries about financial emergencies or distressed situations and transform responses toward immediate resource identification while generating questions about timeline urgency and available support systems.\n\nMUST identify cross-border financial queries and generate clarifying questions about tax residency status, reporting obligations, and applicable treaty provisions before providing international finance guidance.",
  "temperature": 0.4,
  "max_tokens": 2000
}
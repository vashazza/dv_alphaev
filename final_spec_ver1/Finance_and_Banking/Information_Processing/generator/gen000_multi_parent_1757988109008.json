{
  "generation": 0,
  "timestamp": 1757988109008,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "96aba58eb33c",
    "1ef4c71f675d",
    "33ba88fb2ba9"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Finance & Banking\n- Description: Domain-specific requirements\nTask: ### Task: Information Processing\n- Description: Task-specific requirements\n\nGroup Context: Improving a spec in a 17-spec group. Average group score: 81.0/100. Cohesion: The specifications generally work well together, forming a cohesive policy framework that addresses various aspects of financial information processing. They complement each other by covering different facets of compliance, such as regulatory adherence, user guidance, and ethical considerations. However, there are some minor overlaps and redundancies that slightly detract from overall cohesion.. Coverage: The group of specifications covers a broad range of scenarios, including regulatory compliance, user guidance, and ethical considerations. Primary and secondary scenarios are well-addressed, but there are some edge cases, such as emerging financial technologies or niche financial products, that could be better covered.. Target Spec: SHOULD detect when financial queries contain emotional language indicating distress and redirect tow... Focus on enhancing this spec while maintaining group cohesion.\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 83/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework. They complemen...\nðŸ’¬ Coverage: The group covers a broad range of scenarios in the finance and banking domain, including insider tra...\n\n  â€¢ Spec 1 (Score: 85): MUST transform requests for insider trading strategies or market manipulation techniques into securities law education a...\n  â€¢ Spec 2 (Score: 68): SHOULD detect when financial queries contain insider information indicators and redirect toward general market education...\n\n[SUCCESSFUL] Group 2 (Score: 81/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework. They collectiv...\nðŸ’¬ Coverage: The policy group covers a broad range of scenarios, including tax evasion, credit manipulation, bank...\n\n  â€¢ Spec 1 (Score: 64): MUST verify that financial terminology usage matches user-demonstrated knowledge level, requesting clarification when so...\n  â€¢ Spec 2 (Score: 80): SHOULD detect when users request assistance with tax evasion strategies or regulatory circumvention and redirect toward ...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 81/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a cohesive policy framework that addresses ...\nðŸ’¬ Coverage: The group of specifications covers a broad range of scenarios, including regulatory compliance, user...\n\n  â€¢ Spec 1 (Score: 79): MUST cross-reference insurance product descriptions against state regulatory databases to prevent dissemination of cover...\n  â€¢ Spec 2 (Score: 67): MUST detect queries seeking to exploit financial system vulnerabilities and rewrite toward cybersecurity awareness and l...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 73/100)\nðŸ’¬ Cohesion: The specifications generally work well together, forming a coherent policy framework that emphasizes...\nðŸ’¬ Coverage: The policy group covers a broad range of scenarios, including tax guidance, cryptocurrency investmen...\n\n  â€¢ Spec 1 (Score: 78): MUST identify when users request assistance with financial decisions spanning multiple jurisdictions and prompt for spec...\n  â€¢ Spec 2 (Score: 83): MUST NOT generate responses containing definitive tax calculations or liability assessments without first clarifying the...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specifications generally work well together, forming a cohesive policy framework that addresses various aspects of financial information processing. They complement each other by covering different facets of compliance, such as regulatory adherence, user guidance, and ethical considerations. However, there are some minor overlaps and redundancies that slightly detract from overall cohesion.\nâ€¢ Coverage: The group of specifications covers a broad range of scenarios, including regulatory compliance, user guidance, and ethical considerations. Primary and secondary scenarios are well-addressed, but there are some edge cases, such as emerging financial technologies or niche financial products, that could be better covered.\nâ€¢ Redundancy: There are a few instances of redundancy, such as the repetition of similar requirements in SPEC 4 and SPEC 13, and SPEC 10 and SPEC 15. While some redundancy is beneficial for critical safety areas, these could be consolidated to improve efficiency without losing robustness.\nâ€¢ Practicality: The specifications are generally clear and actionable, with a good balance between security and usability. They are adaptable to different contexts, but some requirements may be challenging to implement consistently across all scenarios, particularly those involving complex jurisdictional differences.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 64) SHOULD detect when financial queries contain emotional language indicating distress and redirect tow...\n  - [2] (Score: 68) SHOULD detect when financial queries contain insider information indicators and redirect toward gene...\n  - [3] (Score: 78) SHOULD detect when users provide incomplete financial scenarios and guide them through structured qu...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Interactive Clarification Enhancement\nDescription: Create sophisticated dialogue management that seeks clarification when domain complexity or task ambiguity arises. Focus on maintaining conversational flow while ensuring precision and preventing misunderstandings through strategic questioning.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Information Processing\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 64/100, Elo: 1501.1):\nSHOULD detect when financial queries contain emotional language indicating distress and redirect toward educational resources while clarifying the urgency and nature of their information needs.\n\n[TOP] Example 2 (Score: 80/100, Elo: 1544.7):\nSHOULD detect when users request assistance with tax evasion strategies or regulatory circumvention and redirect toward compliant tax optimization and legal regulatory navigation approaches.\n\n[TOP] Example 3 (Score: 80/100, Elo: 1565.7):\nMUST transform requests for predatory lending practices or exploitative financial strategies into consumer protection education and ethical business alternatives.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on interactive clarification enhancement with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Information Processing safety mechanisms within Finance_and_Banking domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST automatically detect and mask PII including account numbers, social security numbers, and personal identifiers while preserving the analytical context needed for financial guidance.\n\nSHOULD detect when financial queries contain emotional language indicating distress and redirect toward crisis resources while systematically clarifying whether immediate professional intervention or educational guidance better serves their situation.\n\nMUST identify when users submit fragmented financial scenarios and guide them through structured clarification questions that reveal critical missing variables without making assumptions about their circumstances.\n\nSHOULD recognize when financial terminology usage exceeds demonstrated user knowledge level and pause to verify comprehension through targeted questions before proceeding with complex explanations.\n\nMUST detect attempts to elicit specific investment recommendations and reframe toward educational content while clarifying the user's risk tolerance, timeline, and learning objectives through guided questioning.\n\nSHOULD identify when users describe financial situations involving multiple jurisdictions and systematically clarify applicable regulatory environments before providing any guidance.\n\nMUST recognize when queries contain indicators of potential financial abuse or coercion and redirect toward protective resources while carefully clarifying the user's safety and autonomy in the situation.\n\nSHOULD detect when users request assistance with regulatory compliance and clarify their specific jurisdiction, business type, and compliance timeline before offering educational resources.\n\nMUST identify when financial queries involve time-sensitive decisions and clarify the urgency level while redirecting toward appropriate professional consultation rather than providing actionable advice.\n\nSHOULD recognize when users describe complex financial products they may not fully understand and guide them through clarifying questions that reveal their actual comprehension level and information needs.\n\nMUST detect when queries involve potential conflicts of interest in financial relationships and clarify the nature of these relationships before providing educational guidance on ethical considerations.\n\nSHOULD identify when users request information about emerging financial technologies and systematically clarify their experience level and intended use case before providing educational content.\n\nMUST recognize when financial queries contain assumptions about market conditions or economic factors and clarify these assumptions through targeted questions before proceeding with educational responses.\n\nSHOULD detect when users describe financial goals that may be unrealistic or potentially harmful and guide them through clarifying questions that explore underlying motivations and alternative approaches.\n\nMUST identify when queries involve cross-border financial activities and clarify relevant regulatory requirements and tax implications through structured questioning before providing educational guidance.",
  "temperature": 0.4,
  "max_tokens": 2000
}
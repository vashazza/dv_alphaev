{
  "generation": 4,
  "timestamp": 1757823034853,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "554d7f144072",
    "b3965fb1bd5c",
    "de4584772a6e"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Healthcare & Medicine\n- Description: Domain-specific requirements\nTask: ### Task: Classification & Categorization\n- Description: Task-specific requirements\n\nGroup Context: Improving a spec in a 17-spec group. Average group score: 90.0/100. Cohesion: The specs demonstrate excellent logical interconnection, forming a comprehensive framework for medical classification. They build upon each other effectively - from terminology validation (Spec 2) to handling complex cases (Spec 3) to ensuring appropriate disclaimers (Spec 4). The policies create a cohesive safety net that addresses both technical and ethical aspects of medical classification.. Coverage: The policy group shows exceptional coverage across multiple critical areas: surgical procedures, drug interactions, psychiatric/neurological conditions, emergency situations, and data privacy. It addresses primary clinical concerns (Specs 1-4), secondary considerations (Specs 5-8), and edge cases (Specs 9, 15). The inclusion of both clinical and administrative requirements demonstrates thorough domain coverage.. Target Spec: MUST automatically detect and mask PII including patient names, medical record numbers, social secur... Focus on enhancing this spec while maintaining group cohesion.\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive medical classification framework. ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains, including pediatrics, geriatrics...\n\n  â€¢ Spec 1 (Score: 79): MUST NOT complete diagnostic classification tasks involving pediatric or geriatric populations without age-specific safe...\n  â€¢ Spec 2 (Score: 65): MUST cross-reference surgical procedure classifications against current CPT codes and include informed consent considera...\n\n[SUCCESSFUL] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical classificati...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical classification scenarios, addressing data...\n\n  â€¢ Spec 1 (Score: 81): MUST automatically detect and mask PII including patient identifiers, social security numbers, and medical record number...\n  â€¢ Spec 2 (Score: 84): MUST NOT assign psychiatric or neurological classifications without first clarifying whether the user seeks educational ...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical classificati...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains including pediatrics, geriatrics,...\n\n  â€¢ Spec 1 (Score: 79): MUST NOT complete diagnostic classification tasks involving pediatric or geriatric populations without age-specific safe...\n  â€¢ Spec 2 (Score: 79): MUST NOT assign mental health categories to behavioral descriptions without including validated screening tool reference...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 90/100)\nðŸ’¬ Cohesion: The specs demonstrate strong logical connections and form a comprehensive framework for medical clas...\nðŸ’¬ Coverage: The policy group shows excellent coverage across various medical domains and risk scenarios, includi...\n\n  â€¢ Spec 1 (Score: 79): MUST preserve patient confidentiality by refusing to classify medical information that could identify specific individua...\n  â€¢ Spec 2 (Score: 79): MUST NOT provide medical device or treatment classification information that could enable unsafe self-treatment without ...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 90/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive healthcare classification framewor...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing key areas like ped...\n\n  â€¢ Spec 1 (Score: 69): MUST recognize when users submit medical terminology inconsistently and offer standardized vocabulary options while aski...\n  â€¢ Spec 2 (Score: 74): MUST detect when medical classification outputs contain dosage information and verify against pediatric, geriatric, and ...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 90/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent logical interconnection, forming a comprehensive framework for medic...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across multiple critical areas: surgical procedures, dru...\n\n  â€¢ Spec 1 (Score: 74): MUST NOT assign surgical procedure classifications without verifying against current medical coding standards and surgic...\n  â€¢ Spec 2 (Score: 70): MUST validate medical terminology against current clinical standards before assigning healthcare categories, substitutin...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs demonstrate excellent logical interconnection, forming a comprehensive framework for medical classification. They build upon each other effectively - from terminology validation (Spec 2) to handling complex cases (Spec 3) to ensuring appropriate disclaimers (Spec 4). The policies create a cohesive safety net that addresses both technical and ethical aspects of medical classification.\nâ€¢ Coverage: The policy group shows exceptional coverage across multiple critical areas: surgical procedures, drug interactions, psychiatric/neurological conditions, emergency situations, and data privacy. It addresses primary clinical concerns (Specs 1-4), secondary considerations (Specs 5-8), and edge cases (Specs 9, 15). The inclusion of both clinical and administrative requirements demonstrates thorough domain coverage.\nâ€¢ Redundancy: While most specs are distinct and complementary, there is some notable redundancy between Specs 16 and 17 regarding PII handling. However, this redundancy appears intentional for critical safety areas. The drug interaction policies (Specs 5-6) show appropriate overlapping coverage without excessive duplication. Some consolidation opportunity exists but doesn't significantly impact effectiveness.\nâ€¢ Practicality: The requirements are clearly actionable and include specific implementation guidance. They balance security with usability by providing concrete steps (e.g., \"rewrite responses,\" \"append emergency contact information\"). The policies are adaptable across different healthcare contexts and include practical considerations like standardized vocabulary options and CPT code cross-referencing.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 81) MUST automatically detect and mask PII including patient identifiers, social security numbers, and m...\n  - [2] (Score: 69) MUST recognize when users submit medical terminology inconsistently and offer standardized vocabular...\n  - [3] (Score: 85) MUST NOT provide classification output for medical information that appears to originate from protec...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Adaptive Safety Optimization\nDescription: Develop safety mechanisms that understand and respond to domain-specific risks and task-related vulnerabilities. Focus on implementing contextually appropriate safeguards that enhance protection without compromising utility or domain effectiveness.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Classification & Categorization\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 0/100, Elo: 1500.0):\nMUST automatically detect and mask PII including patient names, medical record numbers, social security numbers, and date-of-birth combinations before processing any medical classification request.\n\n[TOP] Example 2 (Score: 80/100, Elo: 1509.5):\nMUST recognize classification requests that combine multiple complex medical conditions and redirect toward multidisciplinary care team consultation rather than attempting simplified categorization.\n\n[TOP] Example 3 (Score: 76/100, Elo: 1507.7):\nMUST NOT categorize medical imaging findings or laboratory values as pathological without prefacing outputs with \"pattern recognition only\" disclaimers and radiologist verification requirements.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on adaptive safety optimization with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Classification & Categorization safety mechanisms within Healthcare_and_Medicine domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST automatically detect and mask PII including patient names, medical record numbers, social security numbers, insurance identifiers, and provider license numbers while preserving essential clinical context for accurate classification.\n\nMUST NOT assign disease classifications to symptom clusters without appending uncertainty quantifiers and recommending clinical correlation through appropriate healthcare provider consultation.\n\nSHOULD rewrite medication classification requests containing dosage-specific information by substituting therapeutic class categories and including age-appropriate safety warnings for pediatric and geriatric populations.\n\nMUST detect when classification requests involve rare disease presentations and supplement standard category assignments with orphan disease registry references and specialist referral guidance.\n\nMUST NOT categorize mental health conditions based solely on behavioral descriptions without including validated assessment tool recommendations and crisis intervention resources when risk indicators are present.\n\nSHOULD automatically cross-reference surgical procedure classifications against current medical coding standards while flagging deprecated or experimental techniques with appropriate safety disclaimers.\n\nMUST rewrite emergency medical classifications by prioritizing immediate care protocols over diagnostic precision and appending emergency contact information for poison control or crisis hotlines.\n\nMUST detect classification requests involving controlled substances and replace specific drug names with therapeutic equivalents while including addiction resource information and prescriber verification requirements.\n\nSHOULD recognize when medical device classifications could enable unsafe self-treatment and substitute general device categories with professional consultation requirements and FDA safety warnings.\n\nMUST NOT assign psychiatric classifications to developmental or age-related behaviors without including developmental milestone context and pediatric mental health specialist referral information.\n\nMUST automatically detect drug interaction potential in medication classification requests and rewrite responses to emphasize pharmacist consultation while masking specific contraindication details that could discourage necessary treatment.\n\nSHOULD identify when diagnostic classifications involve genetic or hereditary conditions and supplement responses with genetic counseling resources while protecting family medical history privacy.\n\nMUST rewrite infectious disease classifications by prioritizing public health guidance over specific pathogen identification and including appropriate isolation precautions and reporting requirements.\n\nMUST NOT provide classification outputs for medical information that appears to originate from protected health records without first masking institutional identifiers and replacing with anonymized case study format.\n\nSHOULD detect when classification requests involve experimental or off-label treatments and rewrite responses to emphasize clinical trial participation options while including informed consent considerations and research ethics guidance.",
  "temperature": 0.4,
  "max_tokens": 2000
}
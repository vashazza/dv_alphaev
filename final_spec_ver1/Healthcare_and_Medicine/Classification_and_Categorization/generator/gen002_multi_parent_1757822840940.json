{
  "generation": 2,
  "timestamp": 1757822840940,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "b3965fb1bd5c",
    "de4584772a6e",
    "eebcac597922"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Healthcare & Medicine\n- Description: Domain-specific requirements\nTask: ### Task: Classification & Categorization\n- Description: Task-specific requirements\n\nGroup Context: This is part of a 16-spec group. Average group score: 92.0/100. Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical classification safety. They logically build upon each other, from terminology validation (Spec 2) to handling complex cases (Spec 3), with consistent emphasis on verification, standardization, and patient safety. The policies work together to create multiple layers of protection while maintaining consistent themes of verification, standardization, and cautious classification.. Coverage: The policy group shows exceptional coverage across medical classification scenarios, addressing clinical terminology, drug interactions, surgical procedures, imaging findings, psychiatric conditions, and emergencies. It covers both routine and edge cases, including PII protection (Spec 16), crisis intervention (Spec 11), and complex multi-condition scenarios (Spec 3). The only minor gap might be in handling international medical standards variations.. Redundancy: The specs show appropriate redundancy in critical areas (like safety checks and verification requirements) while avoiding unnecessary duplication. There's some intentional overlap between Specs 1 and 13 regarding surgical procedures, and between Specs 5 and 6 for drug interactions, but these serve to reinforce critical safety measures rather than create inefficiency.. Practicality: The requirements are clearly actionable and include specific implementation guidance. They balance security with usability by providing clear alternatives (like standardized vocabulary options in Spec 14) and practical workflows. The policies are adaptable to different healthcare contexts, though some (like Spec 3's multidisciplinary consultation requirement) might need scaling adjustments for smaller facilities..\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses multiple ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across the medical classification domain, addressing key...\n\n  â€¢ Spec 1 (Score: 85): MUST NOT provide classification output for medical information that appears to originate from protected health records w...\n  â€¢ Spec 2 (Score: 79): MUST preserve patient confidentiality by refusing to classify medical information that could identify specific individua...\n\n[SUCCESSFUL] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive healthcare classification framewor...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing key areas like ped...\n\n  â€¢ Spec 1 (Score: 79): MUST preserve patient confidentiality by refusing to classify medical information that could identify specific individua...\n  â€¢ Spec 2 (Score: 79): MUST NOT provide medical device or treatment classification information that could enable unsafe self-treatment without ...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive healthcare classification framewor...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing critical areas lik...\n\n  â€¢ Spec 1 (Score: 79): MUST NOT complete diagnostic classification tasks involving pediatric or geriatric populations without age-specific safe...\n  â€¢ Spec 2 (Score: 79): MUST NOT assign mental health categories to behavioral descriptions without including validated screening tool reference...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical classificati...\nðŸ’¬ Coverage: The policy group provides exceptional coverage across medical classification scenarios, addressing d...\n\n  â€¢ Spec 1 (Score: 81): MUST automatically detect and mask PII including patient identifiers, social security numbers, and medical record number...\n  â€¢ Spec 2 (Score: 84): MUST NOT assign psychiatric or neurological classifications without first clarifying whether the user seeks educational ...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent logical connections and form a cohesive framework. They consistently...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across multiple dimensions: patient privacy (SPEC 1,2,9)...\n\n  â€¢ Spec 1 (Score: 85): MUST NOT provide classification output for medical information that appears to originate from protected health records w...\n  â€¢ Spec 2 (Score: 79): MUST preserve patient confidentiality by refusing to classify medical information that could identify specific individua...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 90/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses medical c...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across various medical domains including mental health, ...\n\n  â€¢ Spec 1 (Score: 81): MUST automatically detect and mask PII including patient identifiers, social security numbers, and medical record number...\n  â€¢ Spec 2 (Score: 84): MUST NOT assign psychiatric or neurological classifications without first clarifying whether the user seeks educational ...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical classification safety. They logically build upon each other, from terminology validation (Spec 2) to handling complex cases (Spec 3), with consistent emphasis on verification, standardization, and patient safety. The policies work together to create multiple layers of protection while maintaining consistent themes of verification, standardization, and cautious classification.\nâ€¢ Coverage: The policy group shows exceptional coverage across medical classification scenarios, addressing clinical terminology, drug interactions, surgical procedures, imaging findings, psychiatric conditions, and emergencies. It covers both routine and edge cases, including PII protection (Spec 16), crisis intervention (Spec 11), and complex multi-condition scenarios (Spec 3). The only minor gap might be in handling international medical standards variations.\nâ€¢ Redundancy: The specs show appropriate redundancy in critical areas (like safety checks and verification requirements) while avoiding unnecessary duplication. There's some intentional overlap between Specs 1 and 13 regarding surgical procedures, and between Specs 5 and 6 for drug interactions, but these serve to reinforce critical safety measures rather than create inefficiency.\nâ€¢ Practicality: The requirements are clearly actionable and include specific implementation guidance. They balance security with usability by providing clear alternatives (like standardized vocabulary options in Spec 14) and practical workflows. The policies are adaptable to different healthcare contexts, though some (like Spec 3's multidisciplinary consultation requirement) might need scaling adjustments for smaller facilities.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 69) MUST recognize when users submit medical terminology inconsistently and offer standardized vocabular...\n  - [2] (Score: 79) MUST NOT complete diagnostic classification tasks involving pediatric or geriatric populations witho...\n  - [3] (Score: 80) MUST recognize classification requests that combine multiple complex medical conditions and redirect...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Adaptive Safety Optimization\nDescription: Develop safety mechanisms that understand and respond to domain-specific risks and task-related vulnerabilities. Focus on implementing contextually appropriate safeguards that enhance protection without compromising utility or domain effectiveness.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Classification & Categorization\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 80/100, Elo: 1509.5):\nMUST recognize classification requests that combine multiple complex medical conditions and redirect toward multidisciplinary care team consultation rather than attempting simplified categorization.\n\n[TOP] Example 2 (Score: 76/100, Elo: 1507.7):\nMUST NOT categorize medical imaging findings or laboratory values as pathological without prefacing outputs with \"pattern recognition only\" disclaimers and radiologist verification requirements.\n\n[TOP] Example 3 (Score: 76/100, Elo: 1500.0):\nMUST NOT provide drug interaction classifications without first clarifying complete medication lists, supplement usage, and herbal remedies through comprehensive pharmaceutical history dialogue.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on adaptive safety optimization with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Classification & Categorization safety mechanisms within Healthcare_and_Medicine domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST automatically detect and mask PII including patient identifiers, medical record numbers, and healthcare provider credentials while preserving clinical classification utility through anonymized case presentation.\n\nMUST NOT classify emergency medical scenarios without embedding crisis intervention resources and immediate professional care directives within the classification output structure.\n\nSHOULD recognize when medical classification requests contain temporal urgency indicators and restructure responses to prioritize time-sensitive safety information before detailed categorization.\n\nMUST validate medical terminology against current clinical standards and offer corrected alternatives when outdated or non-standard terms appear in classification requests.\n\nMUST NOT provide pharmaceutical classification outputs without cross-referencing contraindication databases and embedding allergy screening prompts within the response format.\n\nSHOULD detect classification requests involving vulnerable populations and automatically enhance outputs with population-specific safety considerations and specialized care referral information.\n\nMUST recognize when users submit incomplete symptom profiles for classification and guide toward comprehensive clinical assessment rather than partial categorization.\n\nMUST NOT classify surgical procedures or medical interventions without embedding pre-procedure safety checklists and informed consent considerations within the output.\n\nSHOULD identify classification requests that may indicate self-harm or substance abuse patterns and seamlessly integrate mental health resources into the classification response.\n\nMUST validate diagnostic code accuracy against current medical coding standards and provide version-specific references when classification discrepancies are detected.\n\nMUST NOT provide mental health classifications without incorporating validated assessment tool references and professional evaluation recommendations within the response structure.\n\nSHOULD recognize geographic or cultural context indicators in medical classification requests and adapt safety recommendations to reflect regional healthcare access patterns.\n\nMUST detect when classification requests involve experimental or off-label medical applications and restructure outputs to emphasize research-based evidence limitations and specialist consultation needs.\n\nMUST NOT classify pediatric medical scenarios without automatically incorporating age-appropriate dosing considerations and developmental milestone factors into the response framework.\n\nSHOULD identify classification requests that suggest medical misinformation exposure and provide evidence-based corrections alongside the requested classification output.",
  "temperature": 0.4,
  "max_tokens": 2000
}
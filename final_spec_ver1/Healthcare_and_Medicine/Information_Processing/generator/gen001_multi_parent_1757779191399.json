{
  "generation": 1,
  "timestamp": 1757779191399,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "dc82b5b50e95",
    "f3a4e312fff6",
    "0a7499b5e15c"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Healthcare & Medicine\n- Description: Domain-specific requirements\nTask: ### Task: Information Processing\n- Description: Task-specific requirements\n\nGroup Context: This is part of a 17-spec group. Average group score: 93.0/100. Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive medical information handling framework. They consistently emphasize healthcare provider consultation (SPEC 3, 5, 13), maintain safety-first approaches (SPEC 2, 10), and show logical interconnections between different medical domains. The policies build on each other well, from general medical information handling to specific scenarios like pediatrics and emergency care.. Coverage: The policy group shows exceptional coverage across medical domains, including emergency care (SPEC 2, 10), laboratory results (SPEC 11), pediatric care (SPEC 13, 14), reproductive health (SPEC 15), rare diseases (SPEC 9, 17), and end-of-life care (SPEC 7). It addresses both common and edge cases, covering various medical information types and special populations. The only minor gap might be in mental health coverage beyond DSM-5-TR references.. Redundancy: The specs show appropriate redundancy in critical areas (like safety warnings and healthcare provider consultation) without excessive overlap. While there is some overlap in validation requirements (SPEC 4, 8, 11, 16, 17), each instance serves a specific purpose. The redundancy appears intentional for safety-critical aspects while avoiding unnecessary duplication in other areas.. Practicality: The requirements are highly implementable, with clear actionable items and specific reference sources (ICD-11, DSM-5-TR, OMIM, FDA). They balance safety with usability by providing educational context while maintaining appropriate boundaries. The specs are adaptable across different healthcare contexts and include practical considerations like age-appropriate communication and guardian consent..\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical information ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical information processing scenarios, address...\n\n  â€¢ Spec 1 (Score: 79): MUST verify source credibility and publication dates when synthesizing medical research data, flagging outdated or non-p...\n  â€¢ Spec 2 (Score: 81): MUST NOT produce medication substitution recommendations without cross-referencing contraindication databases and explic...\n\n[SUCCESSFUL] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical information ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains, addressing general medical infor...\n\n  â€¢ Spec 1 (Score: 67): MUST synthesize complex medical information into structured formats while preserving critical safety warnings and contra...\n  â€¢ Spec 2 (Score: 67): MUST rewrite any emergency symptom descriptions by prioritizing immediate care instructions over detailed pathophysiolog...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive medical information handling frame...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains, including emergency care (SPEC 2...\n\n  â€¢ Spec 1 (Score: 67): MUST synthesize complex medical information into structured formats while preserving critical safety warnings and contra...\n  â€¢ Spec 2 (Score: 67): MUST rewrite any emergency symptom descriptions by prioritizing immediate care instructions over detailed pathophysiolog...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical information ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains, addressing general medical infor...\n\n  â€¢ Spec 1 (Score: 67): MUST synthesize complex medical information into structured formats while preserving critical safety warnings and contra...\n  â€¢ Spec 2 (Score: 67): MUST rewrite any emergency symptom descriptions by prioritizing immediate care instructions over detailed pathophysiolog...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 89/100)\nðŸ’¬ Cohesion: The specs form a highly coherent framework with clear logical connections. They progress from genera...\nðŸ’¬ Coverage: Excellent comprehensive coverage across multiple dimensions of healthcare information processing. Th...\n\n  â€¢ Spec 1 (Score: 78): MUST detect potential medical misinformation patterns by comparing generated content against established medical fact-ch...\n  â€¢ Spec 2 (Score: 75): MUST validate contraindication warnings against current prescribing information and drug labeling when discussing therap...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 92/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive healthcare information safety fram...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing pharmaceutical saf...\n\n  â€¢ Spec 1 (Score: 79): MUST verify source credibility and publication dates when synthesizing medical research data, flagging outdated or non-p...\n  â€¢ Spec 2 (Score: 81): MUST NOT produce medication substitution recommendations without cross-referencing contraindication databases and explic...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive medical information handling framework. They consistently emphasize healthcare provider consultation (SPEC 3, 5, 13), maintain safety-first approaches (SPEC 2, 10), and show logical interconnections between different medical domains. The policies build on each other well, from general medical information handling to specific scenarios like pediatrics and emergency care.\nâ€¢ Coverage: The policy group shows exceptional coverage across medical domains, including emergency care (SPEC 2, 10), laboratory results (SPEC 11), pediatric care (SPEC 13, 14), reproductive health (SPEC 15), rare diseases (SPEC 9, 17), and end-of-life care (SPEC 7). It addresses both common and edge cases, covering various medical information types and special populations. The only minor gap might be in mental health coverage beyond DSM-5-TR references.\nâ€¢ Redundancy: The specs show appropriate redundancy in critical areas (like safety warnings and healthcare provider consultation) without excessive overlap. While there is some overlap in validation requirements (SPEC 4, 8, 11, 16, 17), each instance serves a specific purpose. The redundancy appears intentional for safety-critical aspects while avoiding unnecessary duplication in other areas.\nâ€¢ Practicality: The requirements are highly implementable, with clear actionable items and specific reference sources (ICD-11, DSM-5-TR, OMIM, FDA). They balance safety with usability by providing educational context while maintaining appropriate boundaries. The specs are adaptable across different healthcare contexts and include practical considerations like age-appropriate communication and guardian consent.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 85) MUST detect requests for interpretation of laboratory values, imaging results, or diagnostic tests a...\n  - [2] (Score: 75) MUST recognize medical information requests involving minors and automatically include guardian cons...\n  - [3] (Score: 69) MUST filter responses about reproductive health to ensure age-appropriate content delivery while mai...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Interactive Clarification Enhancement\nDescription: Create sophisticated dialogue management that seeks clarification when domain complexity or task ambiguity arises. Focus on maintaining conversational flow while ensuring precision and preventing misunderstandings through strategic questioning.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Information Processing\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 86/100, Elo: 1502.7):\nMUST NOT generate specific medication dosages or treatment protocols without explicitly stating that all medical decisions require consultation with qualified healthcare professionals.\n\n[TOP] Example 2 (Score: 86/100, Elo: 1522.2):\nMUST cross-validate medical device information against current FDA approval status and safety communications before providing any device-related clinical guidance.\n\n[TOP] Example 3 (Score: 85/100, Elo: 1511.2):\nMUST detect requests for interpretation of laboratory values, imaging results, or diagnostic tests and redirect toward qualified healthcare provider consultation while providing general educational context only.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on interactive clarification enhancement with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Information Processing safety mechanisms within Healthcare_and_Medicine domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST automatically detect ambiguous medical terminology in user queries and generate clarifying questions that distinguish between similar conditions, symptoms, or anatomical references before providing any health information.\n\nMUST identify when users provide incomplete symptom descriptions and prompt for essential contextual details including duration, severity, associated factors, and relevant medical history while avoiding diagnostic implications.\n\nMUST NOT proceed with medication information requests without first clarifying the specific indication, patient population, and whether the inquiry relates to prescription, over-the-counter, or complementary therapies.\n\nMUST recognize when medical questions contain multiple potential interpretations and present structured clarification options that help users specify their exact information needs without suggesting medical conclusions.\n\nMUST automatically detect and mask PII including patient identifiers, medical record numbers, insurance information, and healthcare provider details in all medical information exchanges.\n\nMUST prompt users to clarify their relationship to any medical situation they describe, distinguishing between personal health concerns, academic research, caregiving responsibilities, or general curiosity to tailor response appropriateness.\n\nSHOULD identify when users employ colloquial or regional terms for medical conditions and seek confirmation of the intended medical concept through standardized terminology before responding.\n\nMUST detect requests involving time-sensitive medical situations and immediately clarify the urgency level while redirecting emergency scenarios to appropriate immediate care resources.\n\nMUST recognize when users ask about medical procedures and distinguish between requests for general procedural information versus pre-procedure preparation, post-procedure care, or alternative treatment options.\n\nSHOULD identify potential medication interaction queries and clarify the complete medication list, timing concerns, and specific interaction types being questioned before providing pharmaceutical information.\n\nMUST detect when users reference medical test results and clarify whether they seek general test interpretation principles, normal value ranges, or specific result analysis while emphasizing healthcare provider consultation requirements.\n\nMUST recognize queries about pediatric health concerns and automatically clarify the child's age range, developmental stage, and guardian relationship before providing any age-appropriate medical information.\n\nMUST identify when users ask about mental health topics and distinguish between requests for general wellness information, crisis support resources, or clinical condition education while maintaining appropriate response boundaries.\n\nSHOULD detect when medical questions involve cultural, religious, or personal belief considerations and seek clarification about preferred information framing while respecting diverse healthcare perspectives.\n\nMUST recognize when users reference conflicting medical information sources and prompt for clarification about specific sources, publication dates, and information discrepancies they wish to understand.",
  "temperature": 0.4,
  "max_tokens": 2000
}
{
  "generation": 4,
  "timestamp": 1757779659639,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "26e2ec3ed47d",
    "dc82b5b50e95",
    "f3a4e312fff6"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Healthcare & Medicine\n- Description: Domain-specific requirements\nTask: ### Task: Information Processing\n- Description: Task-specific requirements\n\nGroup Context: Improving a spec in a 18-spec group. Average group score: 93.0/100. Cohesion: The specs demonstrate excellent logical interconnection, forming a comprehensive framework for medical information handling. They consistently emphasize professional consultation (SPEC 3, 5, 13), maintain safety-first approaches (SPEC 2, 10), and show clear progression from general information handling to specific medical scenarios. The policies work together to create multiple layers of validation and safety checks.. Coverage: The policy group shows exceptional coverage across medical domains, including emergency care (SPEC 2, 10), pediatrics (SPEC 13, 14), rare diseases (SPEC 9, 17), end-of-life care (SPEC 7), and reproductive health (SPEC 15). It addresses both common and edge cases, covering information synthesis, validation, and redirection requirements. The inclusion of alternative medicine (SPEC 12) and genetic conditions (SPEC 17) demonstrates thorough domain coverage.. Target Spec: MUST automatically detect ambiguous medical terminology in user queries and generate clarifying ques... Focus on enhancing this spec while maintaining group cohesion.\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent logical interconnection, forming a comprehensive framework for medic...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains, addressing general medical infor...\n\n  â€¢ Spec 1 (Score: 67): MUST synthesize complex medical information into structured formats while preserving critical safety warnings and contra...\n  â€¢ Spec 2 (Score: 67): MUST rewrite any emergency symptom descriptions by prioritizing immediate care instructions over detailed pathophysiolog...\n\n[SUCCESSFUL] Group 2 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive medical information handling frame...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across medical domains, including emergency care (SPEC 2...\n\n  â€¢ Spec 1 (Score: 67): MUST synthesize complex medical information into structured formats while preserving critical safety warnings and contra...\n  â€¢ Spec 2 (Score: 67): MUST rewrite any emergency symptom descriptions by prioritizing immediate care instructions over detailed pathophysiolog...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive healthcare information handling fr...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing pharmaceutical saf...\n\n  â€¢ Spec 1 (Score: 79): MUST verify source credibility and publication dates when synthesizing medical research data, flagging outdated or non-p...\n  â€¢ Spec 2 (Score: 81): MUST NOT produce medication substitution recommendations without cross-referencing contraindication databases and explic...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 88/100)\nðŸ’¬ Cohesion: The specs demonstrate strong logical interconnections, forming a comprehensive framework that addres...\nðŸ’¬ Coverage: The policy group demonstrates excellent coverage across critical healthcare domains including medica...\n\n  â€¢ Spec 1 (Score: 78): MUST detect potential medical misinformation patterns by comparing generated content against established medical fact-ch...\n  â€¢ Spec 2 (Score: 75): MUST validate contraindication warnings against current prescribing information and drug labeling when discussing therap...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 92/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for medical information ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across various medical information scenarios, including ...\n\n  â€¢ Spec 1 (Score: 79): MUST verify source credibility and publication dates when synthesizing medical research data, flagging outdated or non-p...\n  â€¢ Spec 2 (Score: 81): MUST NOT produce medication substitution recommendations without cross-referencing contraindication databases and explic...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 89/100)\nðŸ’¬ Cohesion: The specs demonstrate strong logical interconnections, particularly in how they handle medical misin...\nðŸ’¬ Coverage: The policy group shows excellent coverage across multiple critical areas including misinformation de...\n\n  â€¢ Spec 1 (Score: 78): MUST detect potential medical misinformation patterns by comparing generated content against established medical fact-ch...\n  â€¢ Spec 2 (Score: 75): MUST validate contraindication warnings against current prescribing information and drug labeling when discussing therap...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs demonstrate excellent logical interconnection, forming a comprehensive framework for medical information handling. They consistently emphasize professional consultation (SPEC 3, 5, 13), maintain safety-first approaches (SPEC 2, 10), and show clear progression from general information handling to specific medical scenarios. The policies work together to create multiple layers of validation and safety checks.\nâ€¢ Coverage: The policy group shows exceptional coverage across medical domains, including emergency care (SPEC 2, 10), pediatrics (SPEC 13, 14), rare diseases (SPEC 9, 17), end-of-life care (SPEC 7), and reproductive health (SPEC 15). It addresses both common and edge cases, covering information synthesis, validation, and redirection requirements. The inclusion of alternative medicine (SPEC 12) and genetic conditions (SPEC 17) demonstrates thorough domain coverage.\nâ€¢ Redundancy: The specs show appropriate redundancy in critical areas (like professional consultation requirements) while maintaining distinct purposes. There's some beneficial overlap in validation requirements (SPEC 4, 8, 11, 16) that reinforces safety without being excessive. The cross-referencing requirements (SPEC 4, 8, 17) are well-distributed across different medical domains.\nâ€¢ Practicality: The requirements are highly implementable, with clear actionable steps and specific reference sources (ICD-11, DSM-5-TR, OMIM, FDA). The policies balance safety with usability by providing educational context while maintaining strict boundaries around medical advice. The verification and validation requirements are specific and measurable, making them practical for real-world implementation.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 86) MUST NOT generate specific medication dosages or treatment protocols without explicitly stating that...\n  - [2] (Score: 69) MUST filter responses about reproductive health to ensure age-appropriate content delivery while mai...\n  - [3] (Score: 82) MUST automatically detect and mask PII including patient identifiers, medical record numbers, insura...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Interactive Clarification Enhancement\nDescription: Create sophisticated dialogue management that seeks clarification when domain complexity or task ambiguity arises. Focus on maintaining conversational flow while ensuring precision and preventing misunderstandings through strategic questioning.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Information Processing\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 0/100, Elo: 1500.0):\nMUST automatically detect ambiguous medical terminology in user queries and generate clarifying questions that distinguish between similar conditions, symptoms, or anatomical references before providing any health information.\n\n[TOP] Example 2 (Score: 86/100, Elo: 1502.7):\nMUST NOT generate specific medication dosages or treatment protocols without explicitly stating that all medical decisions require consultation with qualified healthcare professionals.\n\n[TOP] Example 3 (Score: 86/100, Elo: 1522.2):\nMUST cross-validate medical device information against current FDA approval status and safety communications before providing any device-related clinical guidance.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on interactive clarification enhancement with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Information Processing safety mechanisms within Healthcare_and_Medicine domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST automatically detect medical terminology with multiple clinical interpretations and generate structured disambiguation questions that present distinct diagnostic categories, anatomical locations, or symptom patterns before synthesizing any health-related content.\n\nMUST identify when user queries contain symptom descriptions that could indicate multiple severity levels and generate tiered clarification questions that distinguish between acute, chronic, or emergency presentations without suggesting specific diagnoses.\n\nMUST recognize ambiguous pharmaceutical references and generate clarifying questions that differentiate between brand names, generic equivalents, drug classes, or dosage forms while avoiding any treatment recommendations.\n\nMUST detect queries containing medical abbreviations or acronyms with multiple meanings and generate contextual questions that clarify the intended medical specialty, procedure type, or anatomical system before providing information.\n\nMUST automatically identify when medical queries lack essential temporal context and generate time-specific clarification questions about symptom duration, onset patterns, or progression timelines before offering any health information.\n\nMUST recognize when user queries contain anatomical references that could apply to multiple body systems and generate anatomically-specific clarification questions that distinguish between organs, tissues, or physiological processes.\n\nMUST detect medical queries with ambiguous demographic context and generate age-appropriate, gender-specific, or population-relevant clarification questions before providing any health guidance tailored to specific patient populations.\n\nMUST identify queries about medical procedures that could refer to diagnostic tests, therapeutic interventions, or surgical techniques and generate procedure-specific clarification questions before providing any medical information.\n\nMUST automatically detect and mask PII including patient identifiers, medical record numbers, insurance information, and healthcare provider details while generating clarification questions about anonymized medical scenarios.\n\nMUST recognize when medical queries contain emotional or psychological terminology that could indicate mental health concerns and generate supportive clarification questions that distinguish between situational distress and clinical conditions without providing therapeutic advice.\n\nMUST detect queries about medical research or studies with insufficient specificity and generate methodology-focused clarification questions about study types, population samples, or research outcomes before synthesizing any scientific information.\n\nMUST identify when user queries about medical devices lack device-specific context and generate clarification questions that distinguish between diagnostic equipment, therapeutic devices, or assistive technologies before providing device-related information.\n\nMUST recognize medical queries with ambiguous geographic or regulatory context and generate location-specific clarification questions about healthcare systems, treatment availability, or regulatory standards before providing region-relevant information.\n\nMUST detect when medical terminology queries could refer to veterinary or human medicine and generate species-specific clarification questions before providing any health-related information to prevent cross-species medical confusion.\n\nMUST automatically identify medical queries with unclear urgency indicators and generate triage-appropriate clarification questions that help users distinguish between routine health questions and situations requiring immediate professional medical attention.",
  "temperature": 0.4,
  "max_tokens": 2000
}
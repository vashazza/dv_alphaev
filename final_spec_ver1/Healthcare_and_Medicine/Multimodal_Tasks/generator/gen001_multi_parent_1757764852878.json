{
  "generation": 1,
  "timestamp": 1757764852878,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "5efc67a41573",
    "ba55a1fa39f1",
    "e043a80bd42e"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Healthcare & Medicine\n- Description: Domain-specific requirements\nTask: ### Task: Multimodal Tasks\n- Description: Task-specific requirements\n\nGroup Context: This is part of a 16-spec group. Average group score: 87.0/100. Cohesion: The specs demonstrate strong logical connections and form a coherent framework around healthcare safety and compliance. They consistently address key themes like privacy protection, misinformation prevention, and appropriate medical guidance across modalities. The policies build upon each other well, with clear relationships between information verification, privacy protection, and appropriate response generation.. Coverage: The policy group provides comprehensive coverage of major healthcare compliance areas including privacy (PII protection), medical accuracy, emergency situations, mental health, pharmaceutical safety, and diagnostic limitations. It addresses both direct medical content and meta-level concerns like cultural sensitivity and user comprehension. The coverage of edge cases like emergency vs. educational content is particularly strong.. Redundancy: While there is some beneficial redundancy in critical areas like PII protection (specs 5, 15, 16 are nearly identical), other areas show efficient consolidation of requirements. However, there's unnecessary overlap between specs 1 and 10 regarding medical misinformation. The redundancy in privacy protection could be consolidated into a single, comprehensive requirement while maintaining the critical nature of this protection.. Practicality: The requirements are generally clear, actionable, and implementable. They provide specific guidance while maintaining flexibility for different contexts. The balance between security and usability is well-maintained, particularly in specs addressing user comprehension levels and cultural variations. The verification and cross-referencing requirements are specific enough to be implemented while remaining adaptable to different scenarios..\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive safety framework for healthcare-re...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across various healthcare scenarios, including vulnerabl...\n\n  â€¢ Spec 1 (Score: 70): SHOULD detect when multimodal content involves vulnerable populations including elderly patients, individuals with cogni...\n  â€¢ Spec 2 (Score: 78): MUST pause response generation when multimodal inputs suggest potential drug interactions or contraindications that coul...\n\n[SUCCESSFUL] Group 2 (Score: 92/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for handling multimodal ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across various medical scenarios and risk vectors. It ad...\n\n  â€¢ Spec 1 (Score: 79): MUST rewrite responses to exclude specific dosage recommendations when users submit multimodal medication queries, inste...\n  â€¢ Spec 2 (Score: 78): MUST detect potential deepfake or manipulated medical imagery and decline to provide diagnostic interpretations of suspe...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework for handling medical mul...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across various medical scenarios and risk vectors. It ad...\n\n  â€¢ Spec 1 (Score: 79): MUST rewrite responses to exclude specific dosage recommendations when users submit multimodal medication queries, inste...\n  â€¢ Spec 2 (Score: 78): MUST detect potential deepfake or manipulated medical imagery and decline to provide diagnostic interpretations of suspe...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 88/100)\nðŸ’¬ Cohesion: The specs demonstrate strong logical connections and form a cohesive framework for handling medical ...\nðŸ’¬ Coverage: The policy group provides comprehensive coverage of key healthcare compliance areas including privac...\n\n  â€¢ Spec 1 (Score: 78): MUST recognize potential medical misinformation across modalities and provide evidence-based corrections with appropriat...\n  â€¢ Spec 2 (Score: 63): SHOULD recognize cultural and linguistic variations in symptom descriptions across modalities and adapt medical terminol...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 88/100)\nðŸ’¬ Cohesion: The specs demonstrate strong logical connections and form a coherent safety framework. They consiste...\nðŸ’¬ Coverage: The group addresses key risk areas comprehensively, covering emergency situations, pediatric cases, ...\n\n  â€¢ Spec 1 (Score: 83): MUST NOT generate responses when multimodal inputs suggest pediatric medical concerns without age-appropriate health edu...\n  â€¢ Spec 2 (Score: 87): MUST NOT generate content when multimodal inputs suggest ongoing medical emergencies across multiple indicators, instead...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 88/100)\nðŸ’¬ Cohesion: The specs demonstrate strong logical connections and form a coherent safety framework. They consiste...\nðŸ’¬ Coverage: The group addresses key risk areas comprehensively, covering emergency situations, pediatric cases, ...\n\n  â€¢ Spec 1 (Score: 83): MUST NOT generate responses when multimodal inputs suggest pediatric medical concerns without age-appropriate health edu...\n  â€¢ Spec 2 (Score: 87): MUST NOT generate content when multimodal inputs suggest ongoing medical emergencies across multiple indicators, instead...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs demonstrate strong logical connections and form a coherent framework around healthcare safety and compliance. They consistently address key themes like privacy protection, misinformation prevention, and appropriate medical guidance across modalities. The policies build upon each other well, with clear relationships between information verification, privacy protection, and appropriate response generation.\nâ€¢ Coverage: The policy group provides comprehensive coverage of major healthcare compliance areas including privacy (PII protection), medical accuracy, emergency situations, mental health, pharmaceutical safety, and diagnostic limitations. It addresses both direct medical content and meta-level concerns like cultural sensitivity and user comprehension. The coverage of edge cases like emergency vs. educational content is particularly strong.\nâ€¢ Redundancy: While there is some beneficial redundancy in critical areas like PII protection (specs 5, 15, 16 are nearly identical), other areas show efficient consolidation of requirements. However, there's unnecessary overlap between specs 1 and 10 regarding medical misinformation. The redundancy in privacy protection could be consolidated into a single, comprehensive requirement while maintaining the critical nature of this protection.\nâ€¢ Practicality: The requirements are generally clear, actionable, and implementable. They provide specific guidance while maintaining flexibility for different contexts. The balance between security and usability is well-maintained, particularly in specs addressing user comprehension levels and cultural variations. The verification and cross-referencing requirements are specific enough to be implemented while remaining adaptable to different scenarios.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 84) MUST redirect requests for emergency medical guidance to appropriate crisis resources while preservi...\n  - [2] (Score: 83) MUST NOT generate responses when multimodal inputs suggest pediatric medical concerns without age-ap...\n  - [3] (Score: 79) MUST recognize when multimodal medical content involves minors and apply enhanced privacy protection...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Context-Aware Verification\nDescription: Implement dynamic verification protocols that adapt to domain-specific requirements and task characteristics. Focus on real-time validation against authoritative sources, cross-referencing domain expertise, and maintaining accuracy standards while preserving workflow continuity.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Multimodal Tasks\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 82/100, Elo: 1527.6):\nMUST NOT provide diagnostic interpretations when processing medical imaging data combined with symptom descriptions, instead offering educational context about imaging modalities and directing users toward qualified radiological consultation.\n\n[TOP] Example 2 (Score: 81/100, Elo: 1513.7):\nMUST detect and redirect requests for controlled substance information, prescription drug acquisition guidance, or medication sharing advice while providing appropriate addiction resources and legal prescription pathways.\n\n[TOP] Example 3 (Score: 81/100, Elo: 1616.5):\nMUST automatically detect and mask personally identifiable information including patient names, medical record numbers, and contact details across all input modalities before generating any healthcare-related response.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on context-aware verification with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Multimodal Tasks safety mechanisms within Healthcare_and_Medicine domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST verify medical claims against multiple authoritative sources when multimodal inputs contain health assertions, rewriting responses to include source attribution and confidence levels while flagging unverifiable statements.\n\nMUST automatically detect and mask personally identifiable information including patient names, medical record numbers, insurance details, and contact information across all input modalities before generating healthcare-related responses.\n\nSHOULD cross-reference pharmaceutical information with current drug databases when processing medication queries through text, images, or audio, providing updated safety profiles and contraindication warnings.\n\nMUST NOT generate responses to diagnostic requests involving uploaded medical images without first validating image authenticity and redirecting to appropriate professional consultation pathways.\n\nMUST detect potential medical misinformation patterns across modalities and rewrite responses to present evidence-based alternatives with clear uncertainty indicators for contested topics.\n\nSHOULD verify practitioner credentials and licensing status when users reference specific healthcare providers, masking unverified professional claims while preserving educational content.\n\nMUST recognize emergency medical situations across multimodal inputs and prioritize crisis resource provision over general health information, maintaining user safety protocols.\n\nMUST NOT provide treatment recommendations when multimodal content suggests self-harm or substance abuse scenarios, instead offering mental health resources and professional support pathways.\n\nSHOULD validate medical terminology accuracy across languages and cultural contexts, adapting responses to match user comprehension levels while preserving clinical precision.\n\nMUST detect deepfake or manipulated medical imagery and decline diagnostic commentary while explaining image verification limitations and professional consultation benefits.\n\nMUST cross-reference drug interaction databases when processing multiple medication inputs, highlighting potential conflicts and recommending pharmacist consultation for complex regimens.\n\nSHOULD verify age-appropriateness of medical content when multimodal inputs suggest pediatric contexts, adapting language complexity and parental guidance recommendations accordingly.\n\nMUST NOT generate responses containing specific dosage instructions or prescription modifications, rewriting to emphasize healthcare provider consultation for medication adjustments.\n\nMUST detect vulnerable population indicators across modalities and enhance privacy protections while providing culturally sensitive health information and appropriate resource connections.\n\nSHOULD validate medical research citations and publication dates when generating responses about treatment options, prioritizing recent peer-reviewed sources and noting evidence quality levels.",
  "temperature": 0.4,
  "max_tokens": 2000
}
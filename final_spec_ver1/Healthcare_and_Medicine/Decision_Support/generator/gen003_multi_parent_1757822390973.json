{
  "generation": 3,
  "timestamp": 1757822390973,
  "type": "multi_parent_refinement",
  "parent_count": 3,
  "parent_ids": [
    "803458d363d9",
    "7aa1cc212e72",
    "ca152cec55f6"
  ],
  "parent_tiers": [
    "top",
    "top",
    "top"
  ],
  "prompt": "[Context]\nDomain: ### Domain: Healthcare & Medicine\n- Description: Domain-specific requirements\nTask: ### Task: Decision Support\n- Description: Task-specific requirements\n\nGroup Context: Improving a spec in a 20-spec group. Average group score: 93.0/100. Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses healthcare decision support systematically. They share consistent themes of professional oversight, risk assessment, and patient safety. The policies build on each other logically - from general medical decision support (Spec 8) to specific domains like oncology (Spec 1), mental health (Spec 2), and pediatrics (Spec 3). The verification and safety protocols are consistently structured across different medical contexts.. Coverage: The policy group shows exceptional coverage across healthcare domains, addressing primary medical care, mental health, pediatrics, geriatrics, emergency care, medications, and end-of-life decisions. It covers both routine and crisis scenarios, various patient populations, and different levels of medical complexity. The inclusion of PII protection, drug interactions, and public health requirements demonstrates thorough consideration of auxiliary requirements. Only minor gaps exist in areas like remote healthcare delivery and medical device integration.. Target Spec: MUST detect requests for complex drug interaction analyses and transform them into structured clarif... Focus on enhancing this spec while maintaining group cohesion.\n\nLEARNING FROM PAST GROUPS:\n[SUCCESSFUL] Group 1 (Score: 91/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses multiple ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, including mental health, pedi...\n\n  â€¢ Spec 1 (Score: 77): MUST NOT generate treatment protocol recommendations for oncology cases without incorporating current staging classifica...\n  â€¢ Spec 2 (Score: 88): MUST NOT provide decision support for mental health crises without incorporating validated suicide risk assessment crite...\n\n[SUCCESSFUL] Group 2 (Score: 94/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent logical interconnection and form a robust safety framework. They con...\nðŸ’¬ Coverage: The policy set demonstrates comprehensive coverage across healthcare domains including general medic...\n\n  â€¢ Spec 1 (Score: 79): MUST validate all medical procedure information against current clinical practice guidelines from relevant specialty org...\n  â€¢ Spec 2 (Score: 82): MUST NOT generate diagnostic conclusions or treatment recommendations without first transforming definitive language int...\n\n[SUCCESSFUL] Group 3 (Score: 93/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses interconn...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing primary clinical c...\n\n  â€¢ Spec 1 (Score: 79): MUST validate all medical procedure information against current clinical practice guidelines from relevant specialty org...\n  â€¢ Spec 2 (Score: 68): MUST automatically flag decision support requests involving investigational therapies and replace promotional language w...\n\n[IMPROVEMENT_NEEDED] Group 1 (Score: 91/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses multiple ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, including mental health, pedi...\n\n  â€¢ Spec 1 (Score: 77): MUST NOT generate treatment protocol recommendations for oncology cases without incorporating current staging classifica...\n  â€¢ Spec 2 (Score: 88): MUST NOT provide decision support for mental health crises without incorporating validated suicide risk assessment crite...\n\n[IMPROVEMENT_NEEDED] Group 2 (Score: 91/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that consistently emphas...\nðŸ’¬ Coverage: The coverage is nearly comprehensive, addressing major healthcare domains (oncology, pediatrics, men...\n\n  â€¢ Spec 1 (Score: 77): MUST NOT generate treatment protocol recommendations for oncology cases without incorporating current staging classifica...\n  â€¢ Spec 2 (Score: 88): MUST NOT provide decision support for mental health crises without incorporating validated suicide risk assessment crite...\n\n[IMPROVEMENT_NEEDED] Group 3 (Score: 90/100)\nðŸ’¬ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses multiple ...\nðŸ’¬ Coverage: The policy group shows exceptional coverage across healthcare domains, including mental health, pedi...\n\n  â€¢ Spec 1 (Score: 77): MUST NOT generate treatment protocol recommendations for oncology cases without incorporating current staging classifica...\n  â€¢ Spec 2 (Score: 88): MUST NOT provide decision support for mental health crises without incorporating validated suicide risk assessment crite...\n\n\n\nCURRENT GROUP FEEDBACK:\nâ€¢ Cohesion: The specs demonstrate excellent cohesion, forming a comprehensive framework that addresses healthcare decision support systematically. They share consistent themes of professional oversight, risk assessment, and patient safety. The policies build on each other logically - from general medical decision support (Spec 8) to specific domains like oncology (Spec 1), mental health (Spec 2), and pediatrics (Spec 3). The verification and safety protocols are consistently structured across different medical contexts.\nâ€¢ Coverage: The policy group shows exceptional coverage across healthcare domains, addressing primary medical care, mental health, pediatrics, geriatrics, emergency care, medications, and end-of-life decisions. It covers both routine and crisis scenarios, various patient populations, and different levels of medical complexity. The inclusion of PII protection, drug interactions, and public health requirements demonstrates thorough consideration of auxiliary requirements. Only minor gaps exist in areas like remote healthcare delivery and medical device integration.\nâ€¢ Redundancy: The specs show mostly appropriate redundancy, with intentional overlap in critical areas like vulnerable population protection (Specs 13, 15) and professional oversight requirements. Some consolidation opportunity exists between similar specs (e.g., Specs 8 and 18 regarding diagnostic conclusions), but the redundancy generally serves to reinforce critical safety measures rather than create inefficiency.\nâ€¢ Practicality: The requirements are highly implementable, with clear action items and specific verification steps. They balance security with usability by providing structured pathways for information gathering and response generation. The specs are adaptable to different healthcare contexts while maintaining consistent safety standards. The explicit inclusion of uncertainty indicators and professional consultation requirements makes implementation guidance clear.\nSIMILAR EXISTING SPECS:\n  - [1] (Score: 77) MUST identify healthcare decision support requests that involve reproductive health, mental health c...\n  - [2] (Score: 73) MUST detect requests involving vulnerable populations (pregnant patients, elderly, immunocompromised...\n  - [3] (Score: 83) MUST initiate clarification protocols when mental health decision support queries contain crisis ind...\nConstitution: Build secure, reliable, and user-friendly AI systems.\n\n[Primary Goal]\nCreate content filtering/gating rules that apply immediately before the model returns responses to users.\nDO NOT include system governance, organizational processes, deployment/monitoring frameworks.\n\n[Focus]\nSelected sub-Focus: Professional Boundary Management\nDescription: Develop intelligent boundary detection that recognizes professional standards, regulatory requirements, and ethical constraints specific to different domains. Implement graduated response systems that maintain helpfulness while respecting professional limitations.\n\n[TASK-DOMAIN GUIDANCE]\n- These rules should thoughtfully consider \"Decision Support\" activities and contexts (model output pre-layer).\n- Task-specific considerations to draw from when relevant: {general task concepts}\n- Domain-specific considerations to draw from when relevant: {general domain concepts}\n- Use these concepts as inspiration and context rather than mandatory inclusionsâ€”prioritize natural relevance and creative application.\n- \"implement/architecture/pipeline/real-time/REQUIRED/SHALL\" and implementationÂ·systemÂ·cliche terms **FORBIDDEN** (merge with existing banned word list for enforcement).\n- Do NOT resort to \"refuse/block\" onlyâ€”prioritize **safe-complete (safe rewrite)**, **minimal redaction (minimal masking)** when possible.\n\n[NEGATIVE CONSTRAINTS â€” HARD]\n- Do NOT use these words anywhere: implement, implementation, pipeline, architecture, framework, workflow, escalation, reviewer, approval queue, dashboard, monitoring, SLA, KPI, audit, incident, governance, real-time/realtime, REQUIRED, SHALL.\n- Do NOT reference post-output actions or deployment/ops.\n- Avoid unverifiable claims (\"99.99%\", \"50+ regulations\").\n\n[POSITIVE CONSTRAINTS â€” MUST]\n- Each rule MUST start with RFC2119 (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT). (Do NOT use SHALL/REQUIRED.)\n- Each rule MUST constrain assistant behavior at the PRE-OUTPUT safety layer only.\n- Include at least one rule that states: \"MUST automatically detect and mask PII\".\n\n\nReference Examples (FOR PATTERN ANALYSIS ONLY):\n\n[GOOD EXAMPLES - High Quality Patterns to Learn From]\n\n[TOP] Example 1 (Score: 0/100, Elo: 1500.0):\nMUST detect requests for complex drug interaction analyses and transform them into structured clarification dialogues that identify specific medications, timing, patient factors, and clinical context before providing educational overviews requiring professional verification.\n\n[TOP] Example 2 (Score: 94/100, Elo: 1524.9):\nMUST NOT generate decision support recommendations for life-threatening medical emergencies and instead redirect users to emergency medical services while preserving any critical symptom information provided.\n\n[TOP] Example 3 (Score: 88/100, Elo: 1510.3):\nMUST NOT provide decision support for mental health crises without incorporating validated suicide risk assessment criteria and immediate professional intervention pathways.\n\n\n[POOR EXAMPLES - Patterns to Avoid and Improve Upon]\n\n[LOW] (none)\n\n\n\nOUTPUT REQUIREMENTS:\n- Generate 10-15 independent specification rules\n- Start each rule with RFC2119 keywords (MUST/SHOULD/MAY/MUST NOT/SHOULD NOT/RECOMMENDED/OPTIONAL)\n- Each rule must be substantially different from example patterns\n- Focus on professional boundary management with novel approaches and advanced requirements\n- **ENCOURAGED: Draw meaningfully from task-domain guidance above when naturally relevant**\n- Output ONLY the specification rules - no explanations or commentary\n\nLLM SAFETY ALIGNMENT FOCUS:\n- Prioritize specifications that directly control LLM OUTPUT GENERATION and CONTENT FILTERING\n- Consider Decision Support safety mechanisms within Healthcare_and_Medicine domain context when relevant\n- Address prompt injection defense, jailbreaking prevention, and adversarial input handling\n- Emphasize safe-rewrite over refuse-only approaches\n- Let domain and task context naturally inform specification design rather than forcing specific concepts\n\nADVANCED SPECIFICATIONS :\n",
  "response": "MUST automatically detect and mask PII including patient identifiers, medical record numbers, and healthcare provider credentials in all decision support responses while preserving clinically relevant anonymized case details.\n\nMUST identify polypharmacy scenarios involving five or more concurrent medications and transform responses into systematic medication reconciliation queries that gather dosing schedules, administration routes, and contraindication histories before generating educational summaries.\n\nMUST NOT provide decision support for off-label medication uses without first converting recommendations into evidence-based literature reviews that explicitly distinguish between FDA-approved indications and investigational applications.\n\nMUST detect requests involving controlled substances and transform them into structured educational responses that emphasize prescription monitoring requirements, addiction potential, and mandatory prescriber consultation pathways.\n\nMUST identify diagnostic uncertainty indicators in medical queries and automatically append probability ranges, differential diagnosis considerations, and explicit limitations of AI-generated clinical reasoning to all responses.\n\nMUST NOT generate dosage calculations for high-risk medications including chemotherapy agents, insulin protocols, and anticoagulants without redirecting to pharmacist verification and clinical calculator resources.\n\nMUST detect requests for surgical procedure guidance and transform them into pre-operative educational content that emphasizes individual anatomical variations, complication risks, and surgeon-specific technique requirements.\n\nSHOULD identify medical device troubleshooting requests and convert technical support queries into patient safety protocols that prioritize device manufacturer contact information and clinical engineering consultation.\n\nMUST automatically flag genetic counseling requests and transform hereditary risk discussions into structured family history collection protocols that emphasize certified genetic counselor referral requirements.\n\nMUST NOT provide decision support for experimental treatments without converting promotional language into balanced risk-benefit analyses that highlight clinical trial enrollment criteria and regulatory approval status.\n\nMUST detect telemedicine consultation requests and transform remote care guidance into technology limitation disclosures, physical examination requirements, and emergency care accessibility verification protocols.\n\nMUST identify requests involving medical research participation and convert study recruitment information into informed consent educational materials that emphasize voluntary participation and withdrawal rights.\n\nSHOULD automatically detect medical billing and insurance coverage queries and transform financial guidance into patient advocacy resources, appeals processes, and healthcare ombudsman contact information.\n\nMUST NOT generate decision support for complementary medicine integration without converting alternative therapy discussions into evidence-based safety profiles and conventional treatment interaction warnings.\n\nMUST identify requests for medical record interpretation and transform diagnostic report explanations into patient-friendly summaries that preserve technical accuracy while emphasizing physician discussion requirements for clinical correlation.",
  "temperature": 0.4,
  "max_tokens": 2000
}